<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>PangPang Click Neon World | Addictive Click Game, Compete with Friends!</title>
  <meta name="description" content="A cute puppy and cat themed click game! Challenge the highest score in 30 seconds. Optimized for mobile, top ranking, and real-time score sharing.">
  <meta name="keywords" content="click game, typing game, puppy game, cat game, casual game, neon world, high score, score share, friend battle, mobile game">
  <meta name="author" content="Widenex Interactive">
  <meta property="og:title" content="PangPang Click Neon World | Challenge the High Score!" />
  <meta property="og:description" content="Cute and bright neon theme click game! Go for the high score and compete with your friends." />
  <meta property="og:image" content="https://games.mahalohana-bruce.com/random-click/en/og-image.png">
  <meta property="og:url" content="https://games.mahalohana-bruce.com/random-click/en/index.html" />
  <link rel="canonical" href="https://games.mahalohana-bruce.com/random-click/en/index.html" />
  <link rel="icon" href="https://games.mahalohana-bruce.com/random-click/en/favicon.png" />
  <link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-KPV6LHBP');</script>
  <!-- End Google Tag Manager -->
  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-BQ0X83DNPB"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-BQ0X83DNPB');
  </script>
  <!-- Google AdSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5508768187151867"
    crossorigin="anonymous"></script>
  <script async src="https://cdn.ampproject.org/v0.js"></script>
  <script async custom-element="amp-ad"
    src="https://cdn.ampproject.org/v0/amp-ad-0.1.js"></script>
  <style>
    :root {
      --pang-gap: 8px;
      --pang-font-size: 1em;
    }
    html, body {
      font-size: var(--pang-font-size);
      font-family: 'Jua', sans-serif;
      margin: 0; padding: 0;
      background: linear-gradient(to bottom, #e0f7fa 0%, #ffebee 100%);
      color: #333;
      text-align: center;
      transition: font-size 0.18s, color 0.18s, background 0.3s;
    }
    .game-container {
      width: 92%;
      max-width: 400px;
      margin: 18px auto;
      background: #fffefc;
      padding: 15px 5px 20px 5px;
      border-radius: 16px;
      box-shadow: 0 4px 18px rgba(0,0,0,0.10);
      position: relative;
      font-size: 1em;
      min-height: 0px;
    }
    h1 {
      font-size: 1.4em;
      color: #ff4081;
      text-shadow: 0 0 8px #ffb5d7, 0 0 1px #80d8ff;
      margin-bottom: 6px;
      line-height: 1.1;
      transition: font-size 0.18s, color 0.18s;
    }
    button {
      padding: 0.48em 0.95em;
      margin: 7px var(--pang-gap, 8px);
      border: none;
      border-radius: 8px;
      font-size: inherit;
      font-family: inherit;
      cursor: pointer;
      color: #fff;
      background: #4fc3f7;
      transition: 0.16s, font-size 0.18s;
      box-shadow: 0 2px 7px rgba(80, 143, 238, 0.08);
    }
    button:focus {
      outline: 2.5px solid #1976d2 !important;
      outline-offset: 1.5px;
      z-index: 999;
    }
    #startButton { background: #4fc3f7; }
    #resetButton { background: #ef5350; }
    #toggleHelp { background: #ffee58; color: #333; }
    #toggleTheme {
      position: absolute; top: 8px; right: 8px; z-index: 10;
      background: #222;
      color: #fff;
      font-size: 1.2em;
      padding: 4px 10px;
      border-radius: 7px;
      border: none;
      cursor: pointer;
      box-shadow: 0 1px 6px #0001;
      transition: background 0.2s, color 0.2s;
    }
    #openSettings {
      position: absolute; top: 8px; left: 8px; z-index: 10;
      background: #f1f1f1; color: #444;
      font-size: 1.2em;
      padding: 4px 10px;
      border-radius: 7px;
      border: none;
      cursor: pointer;
      box-shadow: 0 1px 6px #0001;
      transition: background 0.2s, color 0.2s;
    }
    #openSettings:hover { background: #ececec; color: #222; }
    #settingsPanel {
      display: none;
      position: fixed;
      top: 58px; left: 13px; width: 180px;
      background: #fff;
      border-radius: 11px;
      box-shadow: 0 4px 24px #0003;
      padding: 13px 13px 10px 13px;
      z-index: 99999;
      border: 1.3px solid #eee;
      font-size: 1em;
      text-align: left;
      animation: fadeIn 0.19s;
       min-width: 190px;
  max-width: 270px;
  box-sizing: border-box;
  word-break: break-all;
    }
    @keyframes fadeIn { from {opacity:0; transform:translateY(-8px);} to {opacity:1; transform:none;} }
    #settingsPanel .settings-row { margin-bottom: 8px; }
    #settingsPanel .font-size-btns {
     flex-wrap: wrap;
    }
    #settingsPanel .font-size-btns button {
      background: #ededed; color: #222;
      padding: 3px 11px; border-radius: 7px; font-size: 1.3em;
      box-shadow: none; margin: 0;
      transition: background 0.2s, color 0.2s;
    }
    #settingsPanel .font-size-btns button:active { background: #eee; }
    #settingsPanel .font-size-value {
      display: inline-block;
      min-width: 32px;
      max-width: 48px;
      font-size: 1em;
      text-align: center;
      color: #222;
      background: #f8f8f8;
      border-radius: 6px;
      margin-left: 6px;
      overflow-wrap: break-word;
      word-break: break-all;
      padding: 0 5px;
      vertical-align: middle;
    }
    #settingsPanel .close-btn {
      text-align: right;
      margin-top: 7px;
    }
    #settingsPanel .close-btn button {
      color: #222;
      background: #ededed;
      border: none;
      padding: 4px 13px;
      border-radius: 7px;
      font-size: 1em;
      margin:0;
      box-shadow: none;
    }
    #settingsPanel .close-btn button:hover { background: #e0e0e0;}
    #clickButton, #fakeButton {
      position: absolute;
      width: 3.6em;
      height: 3.6em;
      border: none;
      border-radius: 50%;
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      box-shadow: 0 2px 10px rgba(120,120,120,0.18);
      transition: none !important;
      opacity: 1;
      z-index: 50;
      display: none;
    }
    #clickButton.hide, #fakeButton.hide { display: none !important; }
    #clickButton { background-image: url('https://games.mahalohana-bruce.com/random-click/en/dog.png'); }
    #fakeButton { background-image: url('https://games.mahalohana-bruce.com/random-click/en/cat.png'); }
    #bonusButton {
      display: none; position:absolute; width:3em; height:3em;
      background:transparent; border:none;
      background-image:url('https://cdn-icons-png.flaticon.com/512/616/616490.png');
      background-size:cover; border-radius:50%; z-index:99;
      box-shadow: 0 0 8px #1976d299;
    }
    #bonusButton:focus {
      outline: 2.5px solid #d81b60;
      outline-offset: 1.5px;
      z-index: 1000;
    }
    .score-popup {
      position: absolute;
      font-size: 1.2em;
      font-weight: bold;
      color: #ff4081;
      text-shadow: 0 1px 4px #fff7;
      animation: popup 1s ease-out forwards;
      pointer-events: none;
      z-index: 999;
    }
    @keyframes popup {
      0%   { opacity: 1; transform: translateY(0) scale(1);}
      60%  { opacity: 1; transform: translateY(-16px) scale(1.2);}
      100% { opacity: 0; transform: translateY(-32px) scale(0.9);}
    }
    p {
      margin: 3px 0;
      font-size: 1em;
      line-height: 1.5;
      transition: font-size 0.18s, color 0.18s;
    }
    .title-flash { animation: flash 1.05s ease-in-out; }
    @keyframes flash {
      0%,100% { color: #333; }
      45%     { color: #ff4081; text-shadow: 0 0 12px #ffe0f7;}
    }
    .bonus {
      color: #d81b60 !important;
      font-weight: bold;
      font-size: 1.3em;
      text-shadow: 0 0 10px #ffd1ea;
      animation: bonusFlash 1.1s alternate infinite;
    }
    @keyframes bonusFlash {
      0%, 100% { color: #d81b60; }
      50%      { color: #ff80ab; }
    }
    @keyframes shake {
      0% { transform: translateX(0); }
      20% { transform: translateX(-8px); }
      40% { transform: translateX(8px); }
      60% { transform: translateX(-6px); }
      80% { transform: translateX(6px); }
      100% { transform: translateX(0); }
    }
    .shake {
      animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both;
    }
    #instructions {
      display: block;
      background: #fff9c4;
      color: #444;
      border-radius: 7px;
      padding: 0.6em 0.8em;
      margin: 0.6em 0 0.7em 0;
      text-align: left;
      font-size: 0.95em;
      line-height: 1.5;
      transition: font-size 0.18s, color 0.18s, background 0.3s;
    }
    #instructions ul {
      padding-left: 1.3em;
      margin: 0;
    }
    #instructions li {
      margin-bottom: 0.3em;
      line-height: 1.4;
    }
    #instructions img {
      vertical-align: middle;
      height: 18px;
    }
    #ranking {
      margin-top: 0.9em;
      background: #fce4ec;
      border-radius: 8px;
      padding: 0.55em 0.25em 0.55em 0.25em;
      color: #444;
      font-size: 1em;
      transition: font-size 0.18s, color 0.18s, background 0.3s;
      position: relative;
      z-index: 1;
    }
    .ranking-list {
      list-style: none;
      padding: 0;
      margin: 0;
      text-align: center;
      gap: var(--pang-gap, 8px);
    }
    .ranking-list li { line-height: 1.25;}
    #newHighBadge { animation: badgeFlash 1.5s alternate infinite;}
    @keyframes badgeFlash {
      0%,100% { color: #d81b60;}
      60%     { color: #ffb5d7;}
    }
    .score-animate { animation: scoreBounce 0.32s;}
    @keyframes scoreBounce {
      0% { transform: scale(1);}
      60% { transform: scale(1.19);}
      100% { transform: scale(1);}
    }
    .share-block {
      margin-top: 1.1em;
      background: #f9fafe;
      border-radius: 8px;
      padding: 0.5em 0.1em 0.5em 0.1em;
      box-shadow: 0 2px 10px #e0e3f3;
      width: 99%;
      max-width: 400px;
      margin-left: auto;
      margin-right: auto;
      font-size: 1em;
      transition: font-size 0.18s, color 0.18s, background 0.3s;
      position: relative;
      z-index: 1;
    }
    .share-message {
      font-size: 1em;
      margin-bottom: 0.3em;
      color: #454554;
    }
    .share-message .share-sub {
      font-size: 0.88em;
      color: #666;
      margin: 1px 0 2px 0;
      letter-spacing: -0.2px;
    }
    .share-buttons {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: var(--pang-gap, 8px);
      margin-top: 3px;
      margin-bottom: 0;
    }
    .share-buttons button {
      background: #fff;
      border: 1.5px solid #ffe066;
      border-radius: 8px;
      padding: 0.33em 0.7em;
      display: flex;
      align-items: center;
      gap: 5px;
      cursor: pointer;
      box-shadow: 0 2px 10px #ffe066, 0 0 7px #ffe066;
      transition: background 0.18s, box-shadow 0.18s, border 0.18s;
      font-size: 1em;
      color: #222;
    }
    .share-buttons button:focus {
      outline: 2.5px solid #ffd600;
      outline-offset: 1.5px;
      z-index: 1000;
    }
    .share-buttons button:hover {
      filter: brightness(1.09);
    }
    .share-buttons button img {
      width: 1.15em;
      height: 1.15em;
    }
    #todayScore {
      margin-top: 0.4em;
      font-size: 0.98em;
    }
    #toast-msg {
      position: fixed;
      bottom: 1.7em;
      left: 50%;
      transform: translateX(-50%);
      background: #222b;
      color: #fff;
      padding: 0.65em 1.25em;
      border-radius: 12px;
      font-size: 1em;
      z-index: 99999;
      opacity: 0;
      transition: opacity 0.4s;
    }
    body.dark-mode {
      background: linear-gradient(to bottom,#282c34 0%,#2e3240 100%);
      color: #eaf3ff;
    }
    body.dark-mode .game-container,
    body.dark-mode .share-block,
    body.dark-mode #ranking {
      background: #23263a;
      color: #eaf3ff !important;
      box-shadow: 0 2px 14px #0005;
    }
    body.dark-mode h1,
    body.dark-mode h3,
    body.dark-mode p,
    body.dark-mode li,
    body.dark-mode strong,
    body.dark-mode #instructions {
      color: #eaf3ff !important;
    }
    body.dark-mode #instructions { background: #373c4d; }
    body.dark-mode #ranking { background: #26293a; }
    body.dark-mode .ranking-list li { color: #eaf3ff !important; }
    body.dark-mode .share-message, 
    body.dark-mode .share-message .share-sub { color: #cbe0ff !important; }
    body.dark-mode .share-buttons button {
      background: #23263a;
      color: #ffd600 !important;
      border: 1.5px solid #ffe066 !important;
      box-shadow: 0 2px 12px #ffe066, 0 0 8px #ffe066;
    }
    body.dark-mode .share-buttons button:hover {
      filter: brightness(1.11);
    }
    body.dark-mode .share-buttons button:focus {
      outline: 2.5px solid #ffd600;
    }
    body.dark-mode .copy-button {
      color: #ffd600 !important;
      border: 1.5px solid #ffe066 !important;
      box-shadow: 0 2px 10px #ffe066, 0 0 7px #ffe066;
      background: #23263a;
    }
    body.dark-mode button,
    body.dark-mode #toggleTheme {
      background: #fff ;
      color: #ffd600 !important;
      border: 1.5px solid #ffe066;
      box-shadow: 0 1px 8px #ffe066;
      transition: background 0.2s, color 0.2s;
    }
    body:not(.dark-mode) #toggleTheme {
      background: #222 !important;
      color: #fff !important;
      border: 1.5px solid #333;
      box-shadow: none;
    }
    body.dark-mode #startButton, body.dark-mode .share-buttons button { background:#1e88e5;}
    body.dark-mode #resetButton { background:#d32f2f;}
    body.dark-mode #toggleHelp { background:#fff59d; color:#222;}
    body.dark-mode #openSettings { background: #353c4a; color:#eee; }
    body.dark-mode #openSettings:hover { background: #454c5c;}
    body.dark-mode #settingsPanel { background: #222834; color: #fff; border: 1.2px solid #35374a;}
    body.dark-mode #settingsPanel .close-btn button { background: #303a4c; color: #eee;}
    body.dark-mode #settingsPanel .close-btn button:hover { background: #384050;}
    body.dark-mode #settingsPanel .font-size-btns button { background: #383d4a; color: #fff;}
    body.dark-mode #settingsPanel .font-size-btns button:active { background: #30374a;}
    body.dark-mode #settingsPanel .font-size-value { background: #353a4b; color: #fff;}
    #gameover-popup {
      position: fixed;
      left: 0; top: 0; width: 100vw; height: 100vh;
      background: rgba(10,15,38,0.50);
      z-index: 999999;
      display: none;
      align-items: center;
      justify-content: center;
    }
    #gameover-popup.show {
      display: flex !important;
    }
    #gameover-popup .gameover-inner {
      background: #fff;
      color: #222;
      border-radius: 18px;
      padding: 2.2em 1.5em 1.4em 1.5em;
      min-width: 230px;
      box-shadow: 0 8px 44px #0006;
      text-align: center;
      font-size: 1.2em;
      max-width: 90vw;
      margin: auto;
    }
    body.dark-mode #gameover-popup .gameover-inner {
      background: #23263a;
      color: #eaf3ff;
    }
    @media (max-width: 480px) {
      .game-container { min-height: 480px; }
    }
  </style>
</head>
<body>
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KPV6LHBP"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
<div id="settingsPanel" style="display:none;">
  <div class="settings-row">
    <label>Font Size</label>
    <div class="font-size-btns">
      <button id="fontSmaller" aria-label="Decrease font size">A-</button>
      <button id="fontDefault" style="font-weight:bold;" aria-label="Default font size">A</button>
      <button id="fontBigger" aria-label="Increase font size">A+</button>
      <span id="fontSizeValue" class="font-size-value" >15px</span>
    </div>
  </div>
  <div class="close-btn">
    <button onclick="closeSettings()" aria-label="Close settings">Close</button>
  </div>
</div>
  <div class="game-container" id="gameContainer">
    <button id="openSettings" aria-label="Open settings">⚙️</button>
    <button id="toggleTheme" aria-label="Toggle dark/light mode">🌙</button>
    <h1>🐾 PangPang Click Neon World</h1>
    <button id="toggleHelp" aria-label="Show/hide help">Hide Help 📘</button>
    <div id="instructions">
      <ul>
        <li>Time limit is 30 seconds!</li>
        <li>🐶 Click the puppy! <img src="https://games.mahalohana-bruce.com/random-click/en/dog.png" alt="Puppy character" /></li>
        <li>🐱 Cat is a trap! <img src="https://games.mahalohana-bruce.com/random-click/en/cat.png" alt="Cat character" /></li>
        <li>When 5 seconds left, <span style="color:#d81b60; font-weight:bold;">Bonus Time</span> (double score)</li>
        <li>10% chance for <span style="color:#1976d2;">Bonus Button</span>, +5 points!</li>
        <li>Level up and title change every 10 points!</li>
      </ul>
    </div>
    <p id="timer"><span id="timerLabel">Time left: </span>30</p>
    <button id="clickButton" aria-label="Puppy button" style="display:none"></button>
    <button id="fakeButton" aria-label="Cat button" style="display:none"></button>
    <button id="bonusButton" aria-label="Bonus button"></button>
    <p id="score" role="status" aria-live="polite">Clicks: 0</p>
    <p id="level" role="status" aria-live="polite">Level: 1</p>
    <p id="title" role="status" aria-live="polite">Title: None</p>
    <p id="highScore" role="status" aria-live="polite">High Score: 0</p>
    <p id="newHighBadge" style="display: none; color: #d81b60; font-weight: bold;">🏅 New High Score!</p>
    <button id="startButton" aria-label="Start game">Start Game</button>
    <button id="resetButton" aria-label="Reset game">Reset Game</button>
    <div id="ranking">
      <h3 style="margin-bottom:3px;">🏆 Top 3 Scores</h3>
      <ul id="topScores" class="ranking-list"></ul>
      <p id="todayScore"></p>
    </div>
    <div class="share-block" id="shareBlock">
      <div class="share-message">
        <strong>Share with friends and compete!</strong>
        <div class="share-sub">Brag your score or invite your friends now.</div>
      </div>
      <div class="share-buttons">
        <button onclick="shareToThreads()" title="Threads" aria-label="Share on Threads">
          <img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/threads.svg" alt="Threads icon" />
        </button>
        <button onclick="shareToFacebook()" title="Facebook" aria-label="Share on Facebook">
          <img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/facebook.svg" alt="Facebook icon" />
        </button>
        <button onclick="shareToX()" title="X(Twitter)" aria-label="Share on X">
          <img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/x.svg" alt="X(Twitter) icon" />
        </button>
        <button onclick="copyScoreLink()" title="Copy score" aria-label="Copy score">
          <img src="https://cdn-icons-png.flaticon.com/512/54/54702.png" alt="Copy icon" />
        </button>
      </div>
      <p id="copyMsg" style="color: green; display: none; width: 100%; font-size:1em; margin:6px 0 0 0;">✅ Share text copied!</p>
    </div>
  </div>
  <audio id="soundScore" src="score.mp3"></audio>
  <audio id="soundFail" src="fail.mp3"></audio>
  <audio id="soundBonus" src="bonus.mp3"></audio>
  <audio id="soundEnd" src="end.mp3"></audio>
  <div id="toast-msg"></div>
  <div id="gameover-popup" style="display:none;">
    <div class="gameover-inner"></div>
  </div>
  <ins class="adsbygoogle"
       style="display:block;margin:24px auto;max-width:350px;"
       data-ad-client="ca-pub-5508768187151867"
       data-ad-slot="8394292465"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
  <amp-ad
    width="320"
    height="100"
    type="adsense"
    data-ad-client="ca-pub-5508768187151867"
    data-ad-slot="8394292465"
    layout="responsive">
  </amp-ad>
  <!-- PangPangClick NeonWorld version 2024.05.25-c1 unified share btns -->
  <script>
    // 한글 주석 유지, UI는 모두 영어
    const GAME_TIME = 30, BONUS_TIME = 5, BONUS_SCORE = 2, NORMAL_SCORE = 1, FAKE_PENALTY = 2, LEVEL_UP = 10;
    const timerDisplay = document.getElementById("timer"),
      scoreDisplay = document.getElementById("score"),
      levelDisplay = document.getElementById("level"),
      titleDisplay = document.getElementById("title"),
      highScoreDisplay = document.getElementById("highScore"),
      clickButton = document.getElementById("clickButton"),
      fakeButton = document.getElementById("fakeButton"),
      bonusButton = document.getElementById("bonusButton"),
      startButton = document.getElementById("startButton"),
      resetButton = document.getElementById("resetButton"),
      toggleHelp = document.getElementById("toggleHelp"),
      instructions = document.getElementById("instructions"),
      topScoresList = document.getElementById("topScores"),
      shareBlock = document.getElementById("shareBlock"),
      gameContainer = document.getElementById("gameContainer");
    const sndScore = document.getElementById("soundScore"),
      sndFail = document.getElementById("soundFail"),
      sndBonus = document.getElementById("soundBonus"),
      sndEnd = document.getElementById("soundEnd");

    let gameState = {
      timeLeft: GAME_TIME,
      score: 0,
      level: 1,
      isBonus: false,
      started: false,
      timer: null,
      topScores: JSON.parse(localStorage.getItem("clickTopScores") || "[0,0,0]")
    };

    // 버튼 위치 중복 방지
    function getForbiddenZones() {
      const forbiddenIds = [
        'openSettings', 'toggleTheme', 'startButton', 'resetButton', 'toggleHelp', 'shareBlock'
      ];
      const container = gameContainer;
      const containerRect = container.getBoundingClientRect();
      return forbiddenIds
        .map(id => document.getElementById(id))
        .filter(el => el && el.offsetParent !== null)
        .map(el => {
          const r = el.getBoundingClientRect();
          return {
            left: r.left - containerRect.left,
            top: r.top - containerRect.top,
            right: r.right - containerRect.left,
            bottom: r.bottom - containerRect.top
          };
        });
    }
    function isOverlapping(rectA, rectB, margin=8) {
      return !(
        rectA.right < rectB.left + margin ||
        rectA.left > rectB.right - margin ||
        rectA.bottom < rectB.top + margin ||
        rectA.top > rectB.bottom - margin
      );
    }
    function randomPosition(button, others = []) {
      const container = gameContainer;
      button.style.display = 'block';
      window.requestAnimationFrame(() => {
        const maxX = container.clientWidth - button.offsetWidth;
        const maxY = container.clientHeight - button.offsetHeight;
        const topSafeZone = 80;
        let x = 0, y = topSafeZone, tries = 0, overlapped, forbiddenOverlap;
        const forbiddenRects = getForbiddenZones();
        do {
          x = Math.random() * maxX;
          y = Math.random() * (maxY - topSafeZone) + topSafeZone;
          const btnRect = {
            left: x,
            top: y,
            right: x + button.offsetWidth,
            bottom: y + button.offsetHeight
          };
          overlapped = others.some(other => {
            if (other.style.display === "none") return false;
            const ox = parseFloat(other.style.left || 0), oy = parseFloat(other.style.top || 0);
            return Math.abs(x - ox) < button.offsetWidth * 0.8 && Math.abs(y - oy) < button.offsetHeight * 0.8;
          });
          forbiddenOverlap = forbiddenRects.some(fRect => isOverlapping(btnRect, fRect, 6));
          tries++;
          if (tries > 100) break;
        } while ((y < topSafeZone || overlapped || forbiddenOverlap) && tries < 100);
        button.style.left = `${x}px`;
        button.style.top = `${y}px`;
        button.classList.remove('hide');
      });
    }

    function setTimerText(time) {
      timerDisplay.innerHTML = `<span id="timerLabel">Time left: </span>${time}`;
    }
    function showScorePopup(text, x, y) {
      const popup = document.createElement("div");
      popup.className = "score-popup";
      popup.textContent = text;
      popup.style.left = x + 'px';
      popup.style.top = y + 'px';
      popup.style.fontSize = getCurrentFontSize() * 1.2 + "px";
      document.body.appendChild(popup);
      setTimeout(() => popup.remove(), 800);
    }
    function showGameButtons(show) {
      clickButton.style.display = show ? "block" : "none";
      fakeButton.style.display = show ? "block" : "none";
    }
    function updateScoreInfo() {
      scoreDisplay.textContent = `Clicks: ${gameState.score}`;
      scoreDisplay.classList.remove('score-animate');
      void scoreDisplay.offsetWidth;
      scoreDisplay.classList.add('score-animate');
      gameState.level = Math.floor(gameState.score / LEVEL_UP) + 1;
      levelDisplay.textContent = `Level: ${gameState.level}`;
      const newTitle = getTitle(gameState.score);
      if (newTitle !== titleDisplay.textContent.split(': ')[1]) {
        titleDisplay.classList.add("title-flash");
        setTimeout(() => titleDisplay.classList.remove("title-flash"), 1000);
        showCenterPopup(`🎉 New title: ${newTitle}!`);
      }
      titleDisplay.textContent = `Title: ${newTitle}`;
    }
    function getTitle(score) {
      if (score >= 100) return "🌟 Superhuman Clicker";
      if (score >= 70) return "💪 Click Master";
      if (score >= 50) return "🔥 Click Pro";
      if (score >= 30) return "🎯 Clicker";
      if (score >= 10) return "😊 Click Beginner";
      return "None";
    }
    function renderTopScores() {
      const labels = ["1st", "2nd", "3rd"];
      topScoresList.innerHTML = labels.map((label, i) => `<li>${label}: ${gameState.topScores[i] || 0}</li>`).join('');
      highScoreDisplay.textContent = `High Score: ${Math.max(...gameState.topScores)}`;
    }
    function updateTodayScore(){
      const today = new Date().toISOString().slice(0,10);
      let dailyScores = JSON.parse(localStorage.getItem('clickDailyScores') || '{}');
      document.getElementById('todayScore').textContent =
        dailyScores[today] ? `Today's Best: ${dailyScores[today]} pts` : '';
    }
    function saveTopScores(score) {
      gameState.topScores.push(score);
      gameState.topScores.sort((a, b) => b - a);
      gameState.topScores = gameState.topScores.slice(0, 3);
      localStorage.setItem("clickTopScores", JSON.stringify(gameState.topScores));
      const today = new Date().toISOString().slice(0,10);
      let dailyScores = JSON.parse(localStorage.getItem('clickDailyScores') || '{}');
      if (!dailyScores[today] || score > dailyScores[today]) {
        dailyScores[today] = score;
        localStorage.setItem('clickDailyScores', JSON.stringify(dailyScores));
      }
      updateTodayScore();
    }
    function resetGame() {
      clearInterval(gameState.timer);
      gameState = { ...gameState, timeLeft: GAME_TIME, score: 0, level: 1, isBonus: false, started: false, timer: null };
      setTimerText(GAME_TIME);
      updateScoreInfo();
      showGameButtons(false);
      timerDisplay.classList.remove("bonus");
      timerDisplay.classList.remove("timer-blink");
      bonusButton.style.display = "none";
    }
    function endGame() {
      clearInterval(gameState.timer);
      gameState.started = false;
      showGameButtons(false);
      saveTopScores(gameState.score);
      renderTopScores();
      safePlay(sndEnd);
      showGameOverPopup(gameState.score);
      if (gameState.score >= Math.max(...gameState.topScores)) {
        document.getElementById("newHighBadge").style.display = "block";
        setTimeout(() => document.getElementById("newHighBadge").style.display = "none", 4000);
      }
    }
    function safePlay(sound) {
      try { if (sound && typeof sound.play === "function") { sound.currentTime = 0; sound.play(); } } catch {}
    }
    function showCenterPopup(msg){
      let center = document.createElement("div");
      center.className = "center-popup";
      center.innerHTML = msg;
      document.body.appendChild(center);
      setTimeout(()=>center.classList.add("show"), 10);
      setTimeout(()=>{center.classList.remove("show"); setTimeout(()=>center.remove(),330)}, 1200);
    }
    function showGameOverPopup(score){
      const popup = document.getElementById('gameover-popup');
      const inner = popup.querySelector('.gameover-inner');
      let msg = '';
      if(score >= 100) msg = "Superhuman click! Legendary👏";
      else if(score >= 70) msg = "Click Master!";
      else if(score >= 50) msg = "Click Pro! Awesome!";
      else if(score >= 30) msg = "Becoming a Clicker!";
      else if(score >= 10) msg = "No more rookie!";
      else msg = "Try again!";
      inner.innerHTML = `<div style="font-size:1.2em;margin-bottom:8px;">🎮 Game Over</div>
        <div style="font-size:1.3em;font-weight:bold; color:#d81b60;margin-bottom:5px;">${score} pts</div>
        <div style="margin-bottom:12px;">${msg}</div>
        <button id="popupCloseBtn">OK</button>`;
      popup.classList.add('show');
      popup.style.display = "flex";
      document.getElementById('popupCloseBtn').onclick = function(){
        closeGameOverPopup();
      };
    }
    function closeGameOverPopup(){
      const popup = document.getElementById('gameover-popup');
      if(popup) {
        popup.classList.remove('show');
        popup.style.display="none";
        setTimeout(()=>{
          const inner = popup.querySelector('.gameover-inner');
          if(inner) inner.innerHTML='';
        }, 220);
      }
    }
    window.closeGameOverPopup = closeGameOverPopup;

    startButton.addEventListener("click", () => {
      if (gameState.started) return;
      if (instructions.style.display === "block") {
        instructions.style.display = "none";
        toggleHelp.textContent = "Show Help 📘";
      }
      gameState = { ...gameState, timeLeft: GAME_TIME, score: 0, level: 1, isBonus: false, started: true };
      updateScoreInfo();
      showGameButtons(true);
      randomPosition(clickButton, [fakeButton]);
      randomPosition(fakeButton, [clickButton]);
      setTimerText(GAME_TIME);
      gameState.timer = setInterval(() => {
        gameState.timeLeft--;
        setTimerText(gameState.timeLeft);
        if (Math.random() < 0.1 && bonusButton.style.display === "none" && gameState.started) {
          randomPosition(bonusButton, [clickButton, fakeButton]);
          bonusButton.style.display = "block";
          setTimeout(() => { bonusButton.style.display = "none"; }, 2000);
        }
        if (gameState.timeLeft <= 5) {
          timerDisplay.classList.add("timer-blink");
        } else {
          timerDisplay.classList.remove("timer-blink");
        }
        if (gameState.timeLeft === BONUS_TIME) {
          gameState.isBonus = true;
          timerDisplay.classList.add("bonus");
        }
        if (gameState.timeLeft <= 0) {
          timerDisplay.classList.remove("bonus");
          timerDisplay.classList.remove("timer-blink");
          endGame();
        }
      }, 1000);
    });

    clickButton.addEventListener("click", (e) => {
      if (!gameState.started) return;
      gameState.score += gameState.isBonus ? BONUS_SCORE : NORMAL_SCORE;
      updateScoreInfo();
      safePlay(sndScore);
      const rect = clickButton.getBoundingClientRect();
      showScorePopup(gameState.isBonus ? "+2" : "+1", rect.left + rect.width/2, rect.top + rect.height/2);
      randomPosition(clickButton, [fakeButton]);
      randomPosition(fakeButton, [clickButton]);
    });
    fakeButton.addEventListener("click", (e) => {
      if (!gameState.started) return;
      gameState.score = Math.max(0, gameState.score - FAKE_PENALTY);
      updateScoreInfo();
      safePlay(sndFail);
      fakeButton.classList.add('shake');
      setTimeout(() => fakeButton.classList.remove('shake'), 400);
      const rect = fakeButton.getBoundingClientRect();
      showScorePopup("-2", rect.left + rect.width/2, rect.top + rect.height/2);
      randomPosition(clickButton, [fakeButton]);
      randomPosition(fakeButton, [clickButton]);
    });
    bonusButton.addEventListener("click", (e) => {
      if (!gameState.started || bonusButton.style.display === "none") return;
      gameState.score += 5;
      updateScoreInfo();
      safePlay(sndBonus);
      const rect = bonusButton.getBoundingClientRect();
      showScorePopup("+5", rect.left + rect.width/2, rect.top + rect.height/2);
      bonusButton.style.display = "none";
    });
    resetButton.addEventListener("click", resetGame);
    toggleHelp.addEventListener("click", () => {
      if (instructions.style.display === "block") {
        instructions.style.display = "none";
        toggleHelp.textContent = "Show Help 📘";
      } else {
        instructions.style.display = "block";
        toggleHelp.textContent = "Hide Help 📘";
      }
    });
    function showToast(msg) {
      const t = document.getElementById('toast-msg');
      t.textContent = msg;
      t.style.opacity = 1;
      clearTimeout(t._timer);
      t._timer = setTimeout(() => t.style.opacity = 0, 1700);
    }
    function shareToThreads() {
      const shareText = `🐾 PangPang Click Neon World, my score: ${gameState.score}! Try it now 👉`;
      const link = window.location.href;
      navigator.clipboard.writeText(`${shareText}\n${link}`).then(() => {
        showToast("Threads share text copied!");
      });
      window.open("https://www.threads.net/", "_blank");
    }
    function shareToFacebook() {
      const url = encodeURIComponent(window.location.href);
      window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}`, "_blank");
      showToast("Facebook share window opened!");
    }
    function shareToX() {
      const url = encodeURIComponent(window.location.href);
      const text = encodeURIComponent(`🐾 PangPang Click Neon World, I scored ${gameState.score}! Compete with friends?`);
      window.open(`https://twitter.com/intent/tweet?text=${text}&url=${url}`, "_blank");
      showToast("X(Twitter) share window opened!");
    }
    function copyScoreLink() {
      const shareText = `🐾 PangPang Click Neon World, my score: ${gameState.score}!\n👉 ${window.location.href}`;
      navigator.clipboard.writeText(shareText).then(() => {
        showToast("Copied!");
      });
    }
    const openSettings = document.getElementById('openSettings');
    const settingsPanel = document.getElementById('settingsPanel');
    const fontSmaller = document.getElementById('fontSmaller');
    const fontDefault = document.getElementById('fontDefault');
    const fontBigger = document.getElementById('fontBigger');
    const fontSizeValue = document.getElementById('fontSizeValue');
    let minFont = 10, maxFont = 32, defaultFont = 15;
    if(openSettings){
      openSettings.onclick = ()=>{settingsPanel.style.display='block'; updateFontSizeValue();};
    }
    function closeSettings(){settingsPanel.style.display='none';}
    window.closeSettings = closeSettings;
    function getCurrentFontSize(){
      return parseInt(getComputedStyle(document.documentElement).fontSize);
    }
    function setFontSize(px){
      document.documentElement.style.fontSize = px+"px";
      localStorage.setItem('pangpangFontSize', px+"px");
      updateFontSizeValue();
    }
    function updateFontSizeValue(){
      if(fontSizeValue)
        fontSizeValue.textContent = getCurrentFontSize()+"px";
    }
    if(fontSmaller){
      fontSmaller.onclick = function() {
        let cur = getCurrentFontSize();
        if(cur > minFont){
          setFontSize(cur-1);
        }
      };
      fontBigger.onclick = function() {
        let cur = getCurrentFontSize();
        if(cur < maxFont){
          setFontSize(cur+1);
        }
      };
      fontDefault.onclick = function() {
        setFontSize(defaultFont);
      };
    }
    function applyUserSettings() {
      if(localStorage.getItem('pangpangFontSize')) {
        document.documentElement.style.fontSize = localStorage.getItem('pangpangFontSize');
        updateFontSizeValue();
      } else {
        setFontSize(defaultFont);
      }
    }
    const toggleTheme = document.getElementById('toggleTheme');
    function updateThemeIcon() {
      if(document.body.classList.contains('dark-mode')) {
        toggleTheme.textContent = "☀️";
        toggleTheme.setAttribute('aria-label', 'Switch to light mode');
      } else {
        toggleTheme.textContent = "🌙";
        toggleTheme.setAttribute('aria-label', 'Switch to dark mode');
      }
    }
    toggleTheme.onclick = function() {
      document.body.classList.toggle('dark-mode');
      localStorage.setItem('pangpangDarkMode', document.body.classList.contains('dark-mode') ? "1" : "");
      updateThemeIcon();
    };
    if(localStorage.getItem('pangpangDarkMode')==="1") {
      document.body.classList.add('dark-mode');
    }
    updateThemeIcon();
    renderTopScores();
    resetGame();
    updateTodayScore();
    applyUserSettings();
    instructions.style.display = "block";
    toggleHelp.textContent = "Hide Help 📘";
    document.getElementById('gameover-popup').classList.remove('show');
    updateFontSizeValue();
    setTimerText(GAME_TIME);
    window.addEventListener('resize', ()=>{
      if(gameState.started){
        randomPosition(clickButton, [fakeButton]);
        randomPosition(fakeButton, [clickButton]);
      }
    });
    console.log('PangPangClick NeonWorld EN version 2024.05.25-c1');
  </script>
</body>
</html>
